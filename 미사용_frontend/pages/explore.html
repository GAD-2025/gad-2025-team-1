<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì•„íŠ¸ ë§ˆì¼“í”Œë ˆì´ìŠ¤ - íƒìƒ‰ (ìµœì¢… ì™„ì„±ë³¸)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* [ìŠ¤íƒ€ì¼ ì„¤ì •] ë‹¤í¬ ì½”ìŠ¤ë¯¹ í…Œë§ˆ */
        :root {
            --color-accent-orange: #ff5722;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: black;
            color: #ccc;
            overflow-x: hidden;
            position: relative; 
            min-height: 100vh;
        }

        /* ìš°ì£¼ ë°°ê²½ ì„¤ì • */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/e/e5/Hubble_Ultra_Deep_Field_%28HUDF%29.jpg'); 
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center center;
            opacity: 0.4;
            z-index: -1;
        }
        
        .cta-button {
            background-color: var(--color-accent-orange);
            transition: all 0.2s;
        }
        .cta-button:hover {
            background-color: #e64a19;
            box-shadow: 0 4px 15px rgba(255, 87, 34, 0.4);
        }

        .logo-placeholder {
            font-size: 1.5rem;
            font-weight: 800;
            color: white;
        }
        .logo-placeholder .ai {
            color: var(--color-accent-orange);
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* ë°°ê²½ ë” ì–´ë‘¡ê²Œ */
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: white;
            padding: 2.5rem;
            border-radius: 16px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            color: #333;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; 
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; 
        }
    </style>
</head>
<body class="antialiased">

    <div id="artworkDetailModal" class="modal-overlay">
        <div class="modal-content relative max-w-3xl w-full mx-4 text-left">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>

            <div class="flex flex-col md:flex-row gap-8">
                <div id="modalImageArea" class="w-full md:w-1/2 aspect-square md:h-80 rounded-xl bg-gray-200 flex items-center justify-center text-gray-400 shadow-inner">
                    <span class="text-sm">Artwork Image Preview</span>
                </div>

                <div class="w-full md:w-1/2 flex flex-col justify-between">
                    <div>
                        <span id="modalCategory" class="text-xs font-bold text-orange-500 tracking-wider uppercase mb-2 block">CATEGORY</span>
                        <h2 id="modalArtworkTitle" class="text-3xl font-extrabold mb-2 text-gray-900 leading-tight">ì‘í’ˆëª…</h2>
                        <div class="flex items-center gap-2 mb-6">
                             <div class="w-6 h-6 rounded-full bg-gray-300"></div>
                             <p class="text-sm text-gray-600">By <span id="modalAuthor" class="font-semibold text-gray-900">ì‘ê°€ëª…</span></p>
                        </div>
                        
                        <div class="border-t border-b border-gray-100 py-4 mb-6">
                            <p class="text-gray-600 text-sm leading-relaxed">
                                ì´ ì‘í’ˆì€ AIê°€ ìƒì„±í•œ ê³ ìœ í•œ ë””ì§€í„¸ ìì‚°ì…ë‹ˆë‹¤. êµ¬ë§¤ ì‹œ ìƒì—…ì  ì´ìš©ì´ ê°€ëŠ¥í•œ ë¼ì´ì„ ìŠ¤ê°€ í¬í•¨ë˜ë©°, ê³ í•´ìƒë„ ì›ë³¸ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>

    <nav class="header-section header-center">
        <ul class="header-menu">
            <li><a href="../../frontend/pages/marketplace.html">ê±°ë˜í•˜ê¸°</a></li>
            <li><a href="../../frontend/pages/archive.html" >ì‘í’ˆë³´ê´€í•¨</a></li>
            <li><a href="../../frontend/pages/myspace.html" >ë§ˆì´ ìŠ¤í˜ì´ìŠ¤</a></li>
            <li><a href="../../frontend/pages/setting.html">ì„¤ì •</a></li>
        </ul>
    </nav>

   <div class="header-section header-right">
        <a href="../../frontend/pages/login.html" class="login-button">ë¡œê·¸ì¸</a>
    </div>
    
    <div>
        <header class="sticky top-0 z-[100] bg-gray-900/90 backdrop-blur-md shadow-lg border-b border-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <a href="#" class="logo-placeholder" onclick="resetSearch(event)">
                        cre<span class="ai">AI</span>tive
                    </a>
                    
                    <nav class="hidden md:flex space-x-6">
                        <a href="#" class="text-gray-300 hover:text-white transition">ê±°ë˜í•˜ê¸°</a>
                        <button class="text-gray-300 hover:text-white transition">ì‘í’ˆ ë³´ê´€í•¨</button>
                        <button class="text-gray-300 hover:text-white transition">ë§ˆì´ìŠ¤í˜ì´ìŠ¤</button>
                        <button class="text-gray-300 hover:text-white transition">ì„¤ì •</button>
                    </nav>

                    <div class="flex items-center space-x-6">
                        <div class="relative cursor-pointer group" title="ì¥ë°”êµ¬ë‹ˆ">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-300 group-hover:text-white transition" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <span id="cartCountBadge" class="hidden absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full border border-gray-900 animate-bounce">0</span>
                        </div>

                        <button class="bg-white text-gray-900 px-5 py-2 font-bold rounded-full text-sm hover:bg-gray-200 transition">ë¡œê·¸ì¸</button>
                    </div>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">

            <section class="py-12 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold mb-4 text-orange-500 drop-shadow-lg">ë‹¹ì‹ ì˜ ì˜ê°ì„ ì°¾ì•„ë³´ì„¸ìš”!</h1>
                <p class="text-lg md:text-xl text-gray-300 mb-8 max-w-2xl mx-auto font-light">
                    ìµœì‹  íŠ¸ë Œë“œì˜ ì‘í’ˆë¶€í„° í¬ê·€í•œ ë³´ì„ê°™ì€ ì‘í’ˆê¹Œì§€,<br>ì§€ê¸ˆ ë°”ë¡œ íƒìƒ‰ì„ ì‹œì‘í•˜ì„¸ìš”!
                </p>
                
                <div class="relative max-w-3xl mx-auto z-50">
                    <div class="flex p-2 bg-gray-800 rounded-full shadow-2xl border border-gray-700 focus-within:border-orange-500 transition-colors">
                        <input type="text" id="searchInput" 
                               placeholder="ì‘í’ˆëª…, ì‘ê°€, #íƒœê·¸ ê²€ìƒ‰ (ì˜ˆ: ëª½í™˜, ê¹€ì‘ê°€)" 
                               autocomplete="off"
                               class="flex-grow bg-transparent p-3 pl-6 text-white focus:outline-none placeholder-gray-400 rounded-l-full"
                               onfocus="showRecentSearches()"
                               onblur="hideRecentSearchesWithDelay()">
                        <button onclick="executeSearch()" class="search-btn cta-button text-white px-8 py-3 font-semibold rounded-full hover:opacity-90 transition">
                            ê²€ìƒ‰
                        </button>
                    </div>

                    <div id="recentSearchDropdown" class="hidden absolute top-full left-4 right-4 mt-2 bg-gray-900 border border-gray-700 rounded-xl shadow-2xl overflow-hidden">
                        <div class="px-4 py-3 bg-gray-800/80 text-xs text-gray-500 font-bold border-b border-gray-700 flex justify-between items-center backdrop-blur-sm">
                            <span>ìµœê·¼ ê²€ìƒ‰ì–´</span>
                            <button onclick="clearRecentSearches()" class="text-gray-500 hover:text-red-400 transition underline">ì „ì²´ ì‚­ì œ</button>
                        </div>
                        <ul id="recentSearchList" class="text-left py-1">
                            </ul>
                    </div>
                </div>
                
                <div class="mt-8 flex flex-wrap justify-center gap-2 max-w-3xl mx-auto">
                    <button class="text-xs md:text-sm bg-gray-700/50 hover:bg-gray-600/70 text-gray-300 px-4 py-1.5 rounded-full transition" onclick="searchKeyword('íŠ¸ë Œë””')">#íŠ¸ë Œë””</button>
                    <button class="text-xs md:text-sm bg-gray-700/50 hover:bg-gray-600/70 text-gray-300 px-4 py-1.5 rounded-full transition" onclick="searchKeyword('ë¯¸ë‹ˆë©€')">#ë¯¸ë‹ˆë©€</button>
                    <button class="text-xs md:text-sm bg-gray-700/50 hover:bg-gray-600/70 text-gray-300 px-4 py-1.5 rounded-full transition" onclick="searchKeyword('ì¶”ìƒ')">#ì¶”ìƒ</button>
                    <button class="text-xs md:text-sm bg-gray-700/50 hover:bg-gray-600/70 text-gray-300 px-4 py-1.5 rounded-full transition" onclick="searchKeyword('í’ê²½í™”')">#í’ê²½í™”</button>
                    <button class="text-xs md:text-sm bg-gray-700/50 hover:bg-gray-600/70 text-gray-300 px-4 py-1.5 rounded-full transition" onclick="searchKeyword('ì»¨ì…‰ì•„íŠ¸')">#ì»¨ì…‰ì•„íŠ¸</button>
                </div>
            </section>

            <div class="border-t border-gray-800 my-10"></div>

            <section id="searchResultsSection" class="hidden mb-20 relative min-h-[500px]">
                <div class="flex flex-col md:flex-row justify-between items-end md:items-center mb-6">
                    <div>
                        <h2 class="text-3xl font-bold text-white mb-2">ê²€ìƒ‰ ê²°ê³¼ <span id="resultCount" class="text-orange-500 text-xl ml-2">(0ê±´)</span></h2>
                        <p class="text-gray-400">ê²€ìƒ‰ì–´: "<span id="currentQuery" class="text-white font-semibold"></span>"</p>
                    </div>
                </div>

                <div class="bg-gray-800 p-4 rounded-xl mb-8 flex flex-col xl:flex-row gap-4 justify-between items-center border border-gray-700 shadow-lg">
                    <div class="flex flex-wrap gap-2 w-full xl:w-auto items-center justify-center md:justify-start">
                        <select id="filterCategory" onchange="applyFilters()" class="bg-gray-900 text-gray-300 text-sm border border-gray-600 rounded-lg p-2.5 focus:ring-orange-500 focus:border-orange-500 outline-none">
                            <option value="all">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>
                            <option value="ì´ë¯¸ì§€ ìƒì„±">ì´ë¯¸ì§€ ìƒì„±</option>
                            <option value="ì–´í”Œ ë””ìì¸">ì–´í”Œ ë””ìì¸</option>
                            <option value="ë§ˆì¼€íŒ… ë°°ë„ˆ">ë§ˆì¼€íŒ… ë°°ë„ˆ</option>
                            <option value="ì¼ëŸ¬ìŠ¤íŠ¸">ì¼ëŸ¬ìŠ¤íŠ¸</option>
                            <option value="ì»¨ì…‰ì•„íŠ¸">ì»¨ì…‰ì•„íŠ¸</option>
                        </select>
                        <select id="filterPrice" onchange="applyFilters()" class="bg-gray-900 text-gray-300 text-sm border border-gray-600 rounded-lg p-2.5 focus:ring-orange-500 focus:border-orange-500 outline-none">
                            <option value="all">ëª¨ë“  ê°€ê²©</option>
                            <option value="free">ë¬´ë£Œ (0C)</option>
                            <option value="low">100C ì´í•˜</option>
                            <option value="mid">100C ~ 300C</option>
                            <option value="high">300C ì´ˆê³¼</option>
                        </select>
                        <button id="btnToggleLike" onclick="toggleLikedFilter()" class="flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-bold border transition duration-200 bg-gray-900 border-gray-600 text-gray-400 hover:text-white hover:border-red-500">
                            <span class="text-red-500 text-lg">â™¥</span> ì°œí•œ ì‘í’ˆë§Œ
                        </button>
                    </div>

                    <div class="flex items-center gap-2 w-full xl:w-auto justify-end">
                        <label for="sortOrder" class="text-sm text-gray-400 whitespace-nowrap">ì •ë ¬:</label>
                        <select id="sortOrder" onchange="applyFilters()" class="bg-gray-900 text-white text-sm border border-gray-600 rounded-lg p-2.5 focus:ring-orange-500 focus:border-orange-500 outline-none">
                            <option value="relevance">ê´€ë ¨ë„ìˆœ</option>
                            <option value="latest">ìµœì‹ ìˆœ</option>
                            <option value="popular">ì¸ê¸°ìˆœ</option>
                            <option value="price_asc">ê°€ê²© ë‚®ì€ìˆœ</option>
                        </select>
                    </div>
                </div>

                <div id="resultsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    </div>

                <div id="loadMoreContainer" class="hidden text-center mt-12">
                    <button onclick="loadMoreItems()" class="px-8 py-3 bg-gray-800 hover:bg-gray-700 text-white font-bold rounded-full border border-gray-600 transition duration-200 flex items-center justify-center mx-auto gap-2 group">
                        <span>ë” ë³´ê¸°</span>
                        <svg class="w-4 h-4 group-hover:translate-y-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <p class="text-gray-500 text-sm mt-3">
                        <span id="displayedCount">0</span> / <span id="totalCount">0</span> ì‘í’ˆ í‘œì‹œ ì¤‘
                    </p>
                </div>

                <div id="noResultsMsg" class="hidden text-center py-20 bg-gray-900/50 rounded-xl border border-dashed border-gray-700">
                    <p class="text-xl text-gray-400 mb-2">ì¡°ê±´ì— ë§ëŠ” ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <button onclick="resetFilters()" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white transition">í•„í„° ì´ˆê¸°í™”</button>
                </div>
            </section>

            <div id="defaultContent">
                <section class="mb-20">
                    <div class="flex items-baseline justify-start space-x-4 mb-4">
                        <span class="text-2xl md:text-3xl font-bold text-white">ê¸ˆì£¼ì˜ ì¶”ì²œ ì‘í’ˆ</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="p-6 rounded-xl cursor-pointer hover:ring-2 hover:ring-white transition shadow-lg" style="background-color: #38761d;" onclick="openModalDetails(1)">
                            <span class="text-xs font-semibold bg-yellow-300 text-gray-900 px-2 py-0.5 rounded-full mb-2 inline-block">NEW</span>
                            <h3 class="text-3xl font-bold mb-1">ëª½ìƒì˜ ìˆ²</h3>
                            <p class="text-sm opacity-80 mb-4">ìì—°ê³¼ AIì˜ ì¡°í™”</p>
                        </div>
                        <div class="p-6 rounded-xl cursor-pointer hover:ring-2 hover:ring-white transition shadow-lg" style="background-color: #674ea7;" onclick="openModalDetails(2)">
                            <h3 class="text-3xl font-bold mb-1">ë„ì‹œì  ë””ìì´ë„ˆ</h3>
                            <p class="text-sm opacity-80 mb-4">ëª¨ë˜ UI/UX</p>
                        </div>
                        <div class="p-6 rounded-xl cursor-pointer hover:ring-2 hover:ring-white transition shadow-lg" style="background-color: #1c4587;" onclick="openModalDetails(3)">
                            <h3 class="text-3xl font-bold mb-1">ë¯¸ë˜ ê±´ì¶•</h3>
                            <p class="text-sm opacity-80 mb-4">3D ë Œë”ë§</p>
                        </div>
                    </div>
                </section>
            </div>

        </main>

        <footer class="bg-gray-900/90 border-t border-gray-800 mt-12 py-8 text-center text-sm text-gray-500">
            &copy; 2025 creAI-tive Art Marketplace. All rights reserved.
        </footer>
    </div>

    <div id="toastMessage" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 transition-all duration-300 opacity-0 translate-y-10 z-[2000] border border-gray-600">
        <div class="bg-green-500 rounded-full p-1">
            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
        </div>
        <span id="toastText" class="font-medium text-sm">ì•Œë¦¼ ë©”ì‹œì§€</span>
    </div>

    <script>
    /* [1] ê°€ìƒ ë°ì´í„°ë² ì´ìŠ¤ (Mock Data - 40ê°œ) */
    const artworkData = [
        { id: 1, title: "ëª½ìƒì˜ ìˆ²", author: "AI Art Lab", tags: ["ìì—°", "í’ê²½í™”", "íŠ¸ë Œë””"], category: "ì´ë¯¸ì§€ ìƒì„±", price: "150C", priceValue: 150, date: "2024-11-01", views: 1200, color: "#38761d", liked: false },
        { id: 2, title: "ë„ì‹œì  ë””ìì´ë„ˆ", author: "Creative Soul", tags: ["ëª¨ë˜", "ì•±", "ë¯¸ë‹ˆë©€"], category: "ì–´í”Œ ë””ìì¸", price: "300C", priceValue: 300, date: "2024-10-25", views: 850, color: "#674ea7", liked: false },
        { id: 3, title: "ë¯¸ë˜ ê±´ì¶•", author: "Future Build", tags: ["SF", "ê±´ì¶•", "3D"], category: "ë§ˆì¼€íŒ… ë°°ë„ˆ", price: "200C", priceValue: 200, date: "2024-11-10", views: 2100, color: "#1c4587", liked: true },
        { id: 4, title: "ì‚¬ìš©ì ê²½í—˜", author: "UX Master", tags: ["UX", "ì•±", "ê¸°íš"], category: "ì–´í”Œ ë””ìì¸", price: "100C", priceValue: 100, date: "2024-09-15", views: 500, color: "#783f04", liked: false },
        { id: 5, title: "SNS ê´‘ê³  ë°°ë„ˆ", author: "Marketing Pro", tags: ["ê´‘ê³ ", "SNS", "íŠ¸ë Œë””"], category: "ë§ˆì¼€íŒ… ë°°ë„ˆ", price: "80C", priceValue: 80, date: "2024-11-20", views: 3000, color: "#cc0000", liked: false },
        { id: 6, title: "ë„ì‹œì˜ ì•¼ê²½", author: "ê¹€ì‘ê°€", tags: ["ì•¼ê²½", "í’ê²½í™”", "ê°ì„±"], category: "ì¼ëŸ¬ìŠ¤íŠ¸", price: "300C", priceValue: 300, date: "2024-10-05", views: 400, color: "#9a3412", liked: false },
        { id: 7, title: "ëª½í™˜ì ì¸ ë°”ë‹¤", author: "ì´ì‘ê°€", tags: ["ë°”ë‹¤", "ëª½í™˜", "ì¶”ìƒ"], category: "ì¼ëŸ¬ìŠ¤íŠ¸", price: "550C", priceValue: 550, date: "2024-08-30", views: 1500, color: "#9d174d", liked: false },
        { id: 8, title: "ì‚¬ì´ë²„í‘í¬ ë¹Œë”©", author: "ë°•ì‘ê°€", tags: ["SF", "ì‚¬ì´ë²„í‘í¬", "ì»¨ì…‰ì•„íŠ¸"], category: "ì»¨ì…‰ì•„íŠ¸", price: "720C", priceValue: 720, date: "2024-11-25", views: 200, color: "#1e40af", liked: false },
        { id: 9, title: "ë¯¸ë‹ˆë©€ ì•„ì´ì½˜", author: "Simplicity", tags: ["ë¯¸ë‹ˆë©€", "ì•„ì´ì½˜", "UI"], category: "ì–´í”Œ ë””ìì¸", price: "50C", priceValue: 50, date: "2024-11-15", views: 900, color: "#4b5563", liked: false },
        { id: 10, title: "ì¶”ìƒì  ê°ì •", author: "Artistic Mind", tags: ["ì¶”ìƒ", "ì˜ˆìˆ ", "ê°ì •"], category: "ì´ë¯¸ì§€ ìƒì„±", price: "400C", priceValue: 400, date: "2024-07-20", views: 600, color: "#0f766e", liked: false },
        { id: 11, title: "ë„¤ì˜¨ ì‚¬ì¸", author: "Night Walker", tags: ["ë„¤ì˜¨", "ë°¤", "í™í•œ"], category: "ì¼ëŸ¬ìŠ¤íŠ¸", price: "120C", priceValue: 120, date: "2024-11-22", views: 1100, color: "#be185d", liked: false },
        { id: 12, title: "ë ˆíŠ¸ë¡œ ê²Œì„", author: "Pixel Artist", tags: ["ë ˆíŠ¸ë¡œ", "í”½ì…€", "ê²Œì„"], category: "ì»¨ì…‰ì•„íŠ¸", price: "90C", priceValue: 90, date: "2024-10-10", views: 3200, color: "#059669", liked: false },
        { id: 13, title: "í™”ì„± ê±°ì£¼ì§€", author: "Space X", tags: ["ìš°ì£¼", "SF", "ë°°ê²½"], category: "ì»¨ì…‰ì•„íŠ¸", price: "600C", priceValue: 600, date: "2024-11-18", views: 150, color: "#c2410c", liked: false },
        { id: 14, title: "ëœë”© í˜ì´ì§€", author: "Web Guru", tags: ["ì›¹", "UI", "ë¹„ì¦ˆë‹ˆìŠ¤"], category: "ì–´í”Œ ë””ìì¸", price: "250C", priceValue: 250, date: "2024-09-01", views: 700, color: "#374151", liked: false },
        { id: 15, title: "ê°€ì„ í’ê²½", author: "Season Art", tags: ["ê°€ì„", "ìì—°", "í’ê²½í™”"], category: "ì´ë¯¸ì§€ ìƒì„±", price: "180C", priceValue: 180, date: "2024-10-15", views: 550, color: "#b45309", liked: false },
        { id: 16, title: "í• ë¡œìœˆ íŒŒí‹°", author: "Event Master", tags: ["í• ë¡œìœˆ", "ì´ë²¤íŠ¸", "ë°°ë„ˆ"], category: "ë§ˆì¼€íŒ… ë°°ë„ˆ", price: "50C", priceValue: 50, date: "2024-10-30", views: 4000, color: "#7c2d12", liked: false },
        { id: 17, title: "ê²¨ìš¸ ì™•êµ­", author: "Snow Man", tags: ["ê²¨ìš¸", "ëˆˆ", "íŒíƒ€ì§€"], category: "ì¼ëŸ¬ìŠ¤íŠ¸", price: "330C", priceValue: 330, date: "2024-11-28", views: 2200, color: "#0ea5e9", liked: false },
        { id: 18, title: "AI ë¡œë´‡", author: "Tech Lab", tags: ["ë¡œë´‡", "AI", "ë¯¸ë˜"], category: "ì´ë¯¸ì§€ ìƒì„±", price: "450C", priceValue: 450, date: "2024-08-05", views: 900, color: "#475569", liked: false },
        { id: 19, title: "ëª¨ë°”ì¼ ë±…í‚¹", author: "FinTech", tags: ["ê¸ˆìœµ", "ì•±", "UI"], category: "ì–´í”Œ ë””ìì¸", price: "500C", priceValue: 500, date: "2024-11-05", views: 300, color: "#1e3a8a", liked: false },
        { id: 20, title: "ë¸”ë™ í”„ë¼ì´ë°ì´", author: "Sale King", tags: ["ì„¸ì¼", "ê´‘ê³ ", "ë°°ë„ˆ"], category: "ë§ˆì¼€íŒ… ë°°ë„ˆ", price: "40C", priceValue: 40, date: "2024-11-25", views: 5000, color: "#000000", liked: false },
        { id: 21, title: "ìˆ²ì†ì˜ ì˜¤ë‘ë§‰", author: "Nature Lover", tags: ["íë§", "ìˆ²", "ë™í™”"], category: "ì¼ëŸ¬ìŠ¤íŠ¸", price: "220C", priceValue: 220, date: "2024-09-20", views: 1300, color: "#166534", liked: false },
        { id: 22, title: "ê³ ì–‘ì´ ì´ˆìƒí™”", author: "Cat Mom", tags: ["ë™ë¬¼", "ê³ ì–‘ì´", "ê·€ì—¬ìš´"], category: "ì´ë¯¸ì§€ ìƒì„±", price: "110C", priceValue: 110, date: "2024-11-12", views: 2500, color: "#f59e0b", liked: false },
        { id: 23, title: "ëŒ€ì‹œë³´ë“œ UI", author: "Admin Pro", tags: ["ê´€ë¦¬ì", "ì›¹", "ë°ì´í„°"], category: "ì–´í”Œ ë””ìì¸", price: "350C", priceValue: 350, date: "2024-10-01", views: 600, color: "#312e81", liked: false },
        { id: 24, title: "ì‹ ë…„ ì¸ì‚¬", author: "Card Maker", tags: ["ìƒˆí•´", "ì¹´ë“œ", "ì „í†µ"], category: "ë§ˆì¼€íŒ… ë°°ë„ˆ", price: "60C", priceValue: 60, date: "2024-12-01", views: 800, color: "#9f1239", liked: false },
        { id: 25, title: "ìˆ˜ì¤‘ ë„ì‹œ", author: "Deep Sea", tags: ["ë¬¼", "SF", "íŒíƒ€ì§€"], category: "ì»¨ì…‰ì•„íŠ¸", price: "650C", priceValue: 650, date: "2024-07-15", views: 180, color: "#0891b2", liked: false },
        { id: 26, title: "ë¹ˆí‹°ì§€ ì¹´í˜", author: "Coffee Love", tags: ["ì¹´í˜", "ë¹ˆí‹°ì§€", "ê°ì„±"], category: "ì¼ëŸ¬ìŠ¤íŠ¸", price: "190C", priceValue: 190, date: "2024-10-22", views: 1400, color: "#78350f", liked: false },
        { id: 27, title: "ìš´ë™ ì•± UI", author: "Health Care", tags: ["ìš´ë™", "ê±´ê°•", "ì•±"], category: "ì–´í”Œ ë””ìì¸", price: "280C", priceValue: 280, date: "2024-11-08", views: 950, color: "#15803d", liked: false },
        { id: 28, title: "ë´„ì˜ ì •ì›", author: "Flower Art", tags: ["ë´„", "ê½ƒ", "í™”ì‚¬í•œ"], category: "ì´ë¯¸ì§€ ìƒì„±", price: "160C", priceValue: 160, date: "2024-04-10", views: 2000, color: "#db2777", liked: false },
        { id: 29, title: "íŒíƒ€ì§€ ë“œë˜ê³¤", author: "Dragon Lord", tags: ["íŒíƒ€ì§€", "ëª¬ìŠ¤í„°", "ìš©"], category: "ì»¨ì…‰ì•„íŠ¸", price: "800C", priceValue: 800, date: "2024-11-29", views: 50, color: "#4c1d95", liked: false },
        { id: 30, title: "ìœ íŠœë¸Œ ì¸íŠ¸ë¡œ", author: "Video Star", tags: ["ìœ íŠœë¸Œ", "ì˜ìƒ", "ì¸ë„¤ì¼"], category: "ë§ˆì¼€íŒ… ë°°ë„ˆ", price: "70C", priceValue: 70, date: "2024-11-15", views: 3500, color: "#b91c1c", liked: false },
    ];

    // [ì „ì—­ ìƒíƒœ ë³€ìˆ˜]
    let currentKeyword = "";
    let showLikedOnly = false;
    let currentPage = 1;
    const itemsPerPage = 8;
    let currentFilteredData = [];
    
    // ì¥ë°”êµ¬ë‹ˆ ë° ëª¨ë‹¬ ìƒíƒœ
    let cart = []; 
    let currentOpenedItemId = null; 
    
    // ìµœê·¼ ê²€ìƒ‰ì–´ ìƒíƒœ
    let recentSearches = JSON.parse(localStorage.getItem('recentSearches')) || [];
    
    // í•„í„° ì ìš© íƒ€ì„ì•„ì›ƒ ë³€ìˆ˜ (ë””ë°”ìš´ì‹± & ë”œë ˆì´)
    let filterTimeout = null;

    /* ê²€ìƒ‰ ì‹¤í–‰ í•¨ìˆ˜ */
    function executeSearch() {
        const searchInput = document.getElementById('searchInput');
        const query = searchInput.value.trim();
        
        if (!query) {
            alert("ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        saveRecentSearch(query);
        
        currentKeyword = query.toLowerCase();
        
        const defaultContent = document.getElementById('defaultContent');
        const searchResultsSection = document.getElementById('searchResultsSection');
        if (defaultContent) defaultContent.classList.add('hidden');
        if (searchResultsSection) searchResultsSection.classList.remove('hidden');
        
        const querySpan = document.getElementById('currentQuery');
        if (querySpan) querySpan.textContent = query;

        resetFilterValues();
        applyFilters();

        document.getElementById('recentSearchDropdown').classList.add('hidden');
    }

    /* ìµœê·¼ ê²€ìƒ‰ì–´ ì €ì¥ */
    function saveRecentSearch(keyword) {
        recentSearches = recentSearches.filter(item => item !== keyword);
        recentSearches.unshift(keyword);
        if (recentSearches.length > 3) recentSearches.pop();
        localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
    }

    /* ìµœê·¼ ê²€ìƒ‰ì–´ í‘œì‹œ */
    function showRecentSearches() {
        const dropdown = document.getElementById('recentSearchDropdown');
        const list = document.getElementById('recentSearchList');
        
        if (recentSearches.length === 0) {
            dropdown.classList.add('hidden');
            return;
        }

        list.innerHTML = recentSearches.map(keyword => `
            <li class="px-4 py-3 hover:bg-gray-800 cursor-pointer border-b border-gray-800 last:border-0 text-gray-300 hover:text-white transition flex justify-between items-center group"
                onclick="searchKeyword('${keyword}')">
                <div class="flex items-center gap-3">
                    <svg class="w-4 h-4 text-gray-500 group-hover:text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span>${keyword}</span>
                </div>
                <span class="text-xs text-gray-600 group-hover:text-gray-400">ê²€ìƒ‰</span>
            </li>
        `).join('');

        dropdown.classList.remove('hidden');
    }

    function hideRecentSearchesWithDelay() {
        setTimeout(() => {
            document.getElementById('recentSearchDropdown').classList.add('hidden');
        }, 200);
    }

    function clearRecentSearches() {
        recentSearches = [];
        localStorage.removeItem('recentSearches');
        document.getElementById('recentSearchDropdown').classList.add('hidden');
    }

    /* íƒœê·¸ í´ë¦­ ê²€ìƒ‰ */
    function searchKeyword(keyword) {
        const searchInput = document.getElementById('searchInput');
        const cleanKeyword = keyword.replace('#', '');
        if (searchInput) {
            searchInput.value = cleanKeyword;
            executeSearch();
        }
    }

    /* í†µí•© í•„í„°ë§ ë¡œì§ (ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© í¬í•¨) */
    function applyFilters() {
        if (filterTimeout) clearTimeout(filterTimeout);

        renderSkeleton();

        filterTimeout = setTimeout(() => {
            performFiltering();
        }, 500);
    }

    /* ì‹¤ì œ ë°ì´í„° í•„í„°ë§ ë° ë Œë”ë§ */
    function performFiltering() {
        currentPage = 1;
        const categoryFilter = document.getElementById('filterCategory')?.value || 'all';
        const priceFilter = document.getElementById('filterPrice')?.value || 'all';
        const sortOrder = document.getElementById('sortOrder')?.value || 'relevance';

        let filtered = artworkData.filter(item => {
            const matchQuery = item.title.toLowerCase().includes(currentKeyword) || 
                               item.author.toLowerCase().includes(currentKeyword) ||
                               item.tags.some(tag => tag.toLowerCase().includes(currentKeyword));
            const matchCategory = categoryFilter === 'all' || item.category === categoryFilter;
            
            let matchPrice = true;
            if (priceFilter === 'free') matchPrice = item.priceValue === 0;
            else if (priceFilter === 'low') matchPrice = item.priceValue > 0 && item.priceValue <= 100;
            else if (priceFilter === 'mid') matchPrice = item.priceValue > 100 && item.priceValue <= 300;
            else if (priceFilter === 'high') matchPrice = item.priceValue > 300;
            
            const matchLiked = showLikedOnly ? item.liked : true;

            return matchQuery && matchCategory && matchPrice && matchLiked;
        });

        if (sortOrder === 'latest') {
            filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
        } else if (sortOrder === 'popular') {
            filtered.sort((a, b) => b.views - a.views);
        } else if (sortOrder === 'price_asc') {
            filtered.sort((a, b) => a.priceValue - b.priceValue);
        }

        currentFilteredData = filtered;
        renderResults();
        updateLikedButtonUI();
    }

    /* ìŠ¤ì¼ˆë ˆí†¤ UI ê·¸ë¦¬ê¸° */
    function renderSkeleton() {
        const resultsGrid = document.getElementById('resultsGrid');
        const resultCount = document.getElementById('resultCount');
        const loadMoreContainer = document.getElementById('loadMoreContainer');
        const noResultsMsg = document.getElementById('noResultsMsg');

        if(resultCount) resultCount.innerText = "(ë¡œë”©ì¤‘...)";
        if(loadMoreContainer) loadMoreContainer.classList.add('hidden');
        if(noResultsMsg) noResultsMsg.classList.add('hidden');

        let skeletonHTML = '';
        for (let i = 0; i < 8; i++) {
            skeletonHTML += `
                <div class="rounded-xl overflow-hidden bg-gray-800 border border-gray-700 animate-pulse">
                    <div class="h-48 bg-gray-700/50"></div> 
                    <div class="p-6 space-y-3">
                        <div class="h-6 bg-gray-700/50 rounded w-3/4"></div>
                        <div class="h-4 bg-gray-700/50 rounded w-1/2"></div>
                    </div>
                    <div class="p-4 border-t border-gray-700 flex justify-between items-center">
                        <div class="flex space-x-2">
                            <div class="h-4 w-10 bg-gray-700/50 rounded"></div>
                            <div class="h-4 w-10 bg-gray-700/50 rounded"></div>
                        </div>
                        <div class="h-5 w-12 bg-gray-700/50 rounded"></div>
                    </div>
                </div>
            `;
        }
        resultsGrid.innerHTML = skeletonHTML;
    }


    /* í™”ë©´ ë Œë”ë§ (í˜ì´ì§€ë„¤ì´ì…˜) */
    function renderResults() {
        const resultsGrid = document.getElementById('resultsGrid');
        const noResultsMsg = document.getElementById('noResultsMsg');
        const resultCount = document.getElementById('resultCount');
        const loadMoreContainer = document.getElementById('loadMoreContainer');
        const displayedCountSpan = document.getElementById('displayedCount');
        const totalCountSpan = document.getElementById('totalCount');

        if (!resultsGrid) return;

        if (resultCount) resultCount.textContent = `(${currentFilteredData.length}ê±´)`;
        
        if (currentFilteredData.length === 0) {
            resultsGrid.innerHTML = '';
            if (noResultsMsg) noResultsMsg.classList.remove('hidden');
            if (loadMoreContainer) loadMoreContainer.classList.add('hidden');
            return;
        }

        if (noResultsMsg) noResultsMsg.classList.add('hidden');

        const itemsToShow = currentFilteredData.slice(0, currentPage * itemsPerPage);
        
        resultsGrid.innerHTML = itemsToShow.map(item => createCardHTML(item)).join('');

        if (itemsToShow.length < currentFilteredData.length) {
            loadMoreContainer.classList.remove('hidden');
            displayedCountSpan.textContent = itemsToShow.length;
            totalCountSpan.textContent = currentFilteredData.length;
        } else {
            loadMoreContainer.classList.add('hidden');
        }
    }

    function loadMoreItems() {
        currentPage++;
        renderResults();
    }

    /* ì¹´ë“œ ìƒì„± í—¬í¼ */
    function createCardHTML(item) {
        const bgStyle = item.color ? `background-color: ${item.color};` : '';
        const heartClass = item.liked ? "text-red-500 fill-current" : "text-white hover:text-red-400";
        const isNewItem = isNew(item.date);

        return `
            <div class="group relative rounded-xl overflow-hidden cursor-pointer transition duration-300 hover:shadow-2xl bg-gray-800 border border-gray-700 hover:border-gray-500 fade-in">
                <div class="h-48 relative p-6 flex flex-col justify-between" style="${bgStyle}" onclick="openModalDetails(${item.id})">
                    <div class="flex justify-between items-start z-10">
                        <span class="text-xs bg-black/40 text-white px-2 py-1 rounded backdrop-blur-sm border border-white/10 shadow-sm">${item.category}</span>
                        ${isNewItem ? '<span class="text-xs font-bold bg-yellow-400 text-black px-2 py-0.5 rounded-full shadow-lg">NEW</span>' : ''}
                    </div>
                    <div class="z-10">
                        <h3 class="text-xl font-bold text-white drop-shadow-md group-hover:scale-105 transition-transform origin-left">${item.title}</h3>
                        <p class="text-xs text-white/90 font-light drop-shadow">${item.author}</p>
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-70"></div>
                </div>
                
                <button onclick="toggleLike(event, ${item.id})" class="absolute top-3 right-3 z-20 p-2 rounded-full bg-black/20 backdrop-blur-md hover:bg-white/20 transition duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ${heartClass}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                    </svg>
                </button>

                <div class="p-4 bg-gray-900 border-t border-gray-700 flex justify-between items-center" onclick="openModalDetails(${item.id})">
                    <div class="flex space-x-1 overflow-hidden">
                        ${item.tags.slice(0, 2).map(tag => `<span class="text-[10px] text-gray-400 bg-gray-800 px-1.5 py-0.5 rounded">#${tag}</span>`).join('')}
                    </div>
                    <span class="text-orange-400 font-bold text-lg">${item.price}</span>
                </div>
            </div>
        `;
    }

    /* ì°œí•˜ê¸° í† ê¸€ */
    function toggleLike(event, id) {
        event.stopPropagation();
        const item = artworkData.find(d => d.id === id);
        if (item) {
            item.liked = !item.liked;
            if (item.liked) showToast(`'${item.title}' ì°œ ì™„ë£Œ! â¤ï¸`);
            else showToast(`ì°œ ì‚­ì œ ì™„ë£Œ.`);
            performFiltering();
        }
    }

    function toggleLikedFilter() {
        showLikedOnly = !showLikedOnly;
        applyFilters(); 
    }

    function updateLikedButtonUI() {
        const btn = document.getElementById('btnToggleLike');
        if (btn) {
            if (showLikedOnly) {
                btn.classList.add('bg-red-900/30', 'border-red-500', 'text-white');
                btn.classList.remove('bg-gray-900', 'border-gray-600', 'text-gray-400');
            } else {
                btn.classList.remove('bg-red-900/30', 'border-red-500', 'text-white');
                btn.classList.add('bg-gray-900', 'border-gray-600', 'text-gray-400');
            }
        }
    }

    /* ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ */
    function addToCartCurrentItem() {
        if (!currentOpenedItemId) return;
        if (cart.includes(currentOpenedItemId)) {
            showToast("ì´ë¯¸ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ì‘í’ˆì…ë‹ˆë‹¤.");
            return;
        }
        cart.push(currentOpenedItemId);
        updateCartCount();
        const item = artworkData.find(d => d.id === currentOpenedItemId);
        if(item) showToast(`ğŸ›’ '${item.title}' ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¹€!`);
    }

    function updateCartCount() {
        const badge = document.getElementById('cartCountBadge');
        if (badge) {
            badge.innerText = cart.length;
            if (cart.length > 0) badge.classList.remove('hidden');
            else badge.classList.add('hidden');
        }
    }

    /* ëª¨ë‹¬ ê¸°ëŠ¥ */
    function openModalDetails(id) {
        const item = artworkData.find(d => d.id === id);
        if (!item) return;

        currentOpenedItemId = item.id;

        const modal = document.getElementById('artworkDetailModal');
        if (modal) {
            document.getElementById('modalArtworkTitle').textContent = item.title;
            document.getElementById('modalAuthor').textContent = item.author;
            document.getElementById('modalCategory').textContent = item.category;
            document.getElementById('modalPrice').textContent = item.price;
            
            const imgArea = document.getElementById('modalImageArea');
            if(imgArea) imgArea.style.backgroundColor = item.color;

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
    }

    function closeModal() {
        const modal = document.getElementById('artworkDetailModal');
        if (modal) {
            modal.style.display = 'none';
            document.body.style.overflow = '';
            currentOpenedItemId = null;
        }
    }

    /* ìœ í‹¸ë¦¬í‹° */
    function showToast(message) {
        const toast = document.getElementById('toastMessage');
        const toastText = document.getElementById('toastText');
        if (toast && toastText) {
            toastText.textContent = message;
            toast.classList.remove('opacity-0', 'translate-y-10');
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-10');
            }, 3000);
        }
    }

    function resetFilterValues() {
        const catFilter = document.getElementById('filterCategory');
        const priceFilter = document.getElementById('filterPrice');
        const sortFilter = document.getElementById('sortOrder');
        if (catFilter) catFilter.value = 'all';
        if (priceFilter) priceFilter.value = 'all';
        if (sortFilter) sortFilter.value = 'relevance';
        showLikedOnly = false;
    }

    function resetFilters() {
        resetFilterValues();
        applyFilters();
    }

    function resetSearch(e) {
        if(e) e.preventDefault();
        const searchInput = document.getElementById('searchInput');
        if (searchInput) searchInput.value = '';
        document.getElementById('defaultContent').classList.remove('hidden');
        document.getElementById('searchResultsSection').classList.add('hidden');
    }

    function isNew(dateString) {
        const date = new Date(dateString);
        const now = new Date('2024-11-26');
        const diffDays = Math.ceil(Math.abs(now - date) / (1000 * 60 * 60 * 24)); 
        return diffDays <= 30; 
    }

    document.addEventListener('DOMContentLoaded', () => {
        const modal = document.getElementById('artworkDetailModal');
        if (modal) {
            modal.addEventListener('click', (e) => {
                if (e.target.id === 'artworkDetailModal') closeModal();
            });
        }
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') executeSearch();
            });
        }
    });
    </script>
</body>
</html>