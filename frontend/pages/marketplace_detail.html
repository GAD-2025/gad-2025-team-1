<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>작품 상세 페이지</title>
    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../../frontend/style/marketplace_detail.css">
</head>
<body>

     <header class="main-header">
    <div class="header-section header-left">
        <a href="../../frontend/pages/explore.html" class="header-logo">
            <span style="color: #FF5900;">creAItive</span>
        </a>
    </div>

   <nav class="header-section header-center">
        <ul class="header-menu">
            <li><a href="../../frontend/pages/marketplace.html" class="active">거래하기</a></li>
            <li><a href="../../frontend/pages/archive.html" >작품보관함</a></li>
            <li><a href="../../frontend/pages/myspace.html" >마이 스페이스</a></li>
            <li><a href="../../frontend/pages/setting.html">설정</a></li>
        </ul>
    </nav>

    <div class="header-section header-right">
        <div class="user-profile-widget">
            <img src="../../frontend/images/White Cats.jpg" alt="프로필" class="widget-profile-img">
            
            <div class="widget-info">
                <span class="widget-user-name">김민지</span>
                
                <span class="widget-badge-buyer">구매자</span>
            </div>
        </div>
    </div>
</header>

    <!-- 팝업 창처럼 보이도록 메인 컨테이너 배치 (상단 메뉴바 생략) --><main class="min-h-screen flex justify-center items-center py-10">
        <!-- detail-container의 배경색은 새로운 body 배경과 대비되도록 유지 --><div class="detail-container w-[90%] max-w-7xl bg-transparent rounded-2xl p-6 flex space-x-8">

            <!-- 왼쪽 박스: 썸네일과 설명 박스 통합 및 디자인 변경 --><div class="w-1/2 flex flex-col orange-border-box rounded-2xl overflow-hidden relative">
                
                <!-- 작품 썸네일 (크게 표시) --><div class="w-full aspect-square bg-gray-800 rounded-t-xl overflow-hidden shadow-lg">
                    <!-- 썸네일 이미지 (플레이스홀더) --><img src="https://placehold.co/1024x1024/4A4A4A/FFFFFF?text=Artwork+Thumbnail" alt="작품 썸네일" class="w-full h-full object-cover">
                </div>
                
                <!-- AI 툴 로고 (오른쪽 상단에 은은하게 배치) --><div class="absolute top-4 right-4 flex flex-col space-y-2 opacity-60">
                    <div class="ai-logo bg-black/50">
                        <i class="fa-solid fa-sailboat text-gray-300 text-base"></i>
                    </div>
                    <div class="ai-logo bg-black/50">
                        <i class="fa-solid fa-shuttle-space text-gray-300 text-base"></i>
                    </div>
                </div>

                <!-- 작품 정보, 제작률, AI 툴, 추천 기능 (flex-grow 적용) -->
                <div class="p-6 flex flex-col flex-grow">
                    
                    <!-- 1. 작품 이름 & 작가 이름 --><div class="border-b border-gray-700 pb-3 mb-4">
                        <h1 class="text-2xl font-extrabold text-white">카멜롯의 일러스트</h1>
                        <p class="text-base text-gray-400">by <span class="text-[var(--color-accent-orange)] font-semibold">김민지 작가</span></p>
                    </div>

                    <!-- 2. 자체제작률 (두꺼워진 그래프) --><div class="flex flex-col items-center space-y-2 pt-2 mb-4">
                        <span class="text-sm font-bold text-gray-400">자체제작률: <span class="text-white">75%</span></span>
                        <!-- 그래프 바 높이 h-5 --><div class="w-full h-5 bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full rounded-full" style="width: 75%; background-color: var(--color-accent-orange);"></div>
                        </div>
                    </div>

                    <!-- 3. 사용 AI 툴 표시 섹션 (무채색 로고) --><div class="flex flex-col space-y-2 pt-4 border-b border-gray-700 pb-4 mb-6">
                        <span class="text-base font-bold text-gray-300">사용된 AI 및 디자인 툴</span>
                        <div class="flex space-x-6 items-center">
                            <!-- Figma Placeholder --><div class="flex items-center space-x-2 text-sm text-gray-400">
                                <i class="fa-solid fa-pen-ruler text-gray-400 text-2xl"></i>
                                <span class="text-white font-semibold">Figma</span>
                            </div>
                            <!-- Gemini Placeholder --><div class="flex items-center space-x-2 text-sm text-gray-400">
                                <i class="fa-solid fa-gem text-gray-400 text-2xl"></i>
                                <span class="text-white font-semibold">Gemini</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 5. [NEW FEATURE: AI 이미지 분석] - 남은 공간 채우기 (flex-grow) -->
                    <div class="flex flex-col p-4 rounded-xl bg-black/50 border border-gray-700 flex-grow justify-center items-center mb-6">
                        <h3 class="text-xl font-bold text-white mb-4">AI가 분석한 이 작품의 매력</h3>
                        <!-- grid로 복원하고, 값을 <br>로 분리하여 줄바꿈 처리 -->
                        <div class="grid grid-cols-2 gap-3 w-full text-sm">
                            <div class="text-gray-400">
                                컬러 팔레트: <br><span class="text-white font-semibold">주황, 네이비</span>
                            </div>
                            <div class="text-gray-400">
                                주요 분위기: <br><span class="text-white font-semibold">Cute, 우주</span>
                            </div>
                            <div class="text-gray-400">
                                세부 묘사: <br><span class="text-white font-semibold">높음 (8K)</span>
                            </div>
                            <div class="text-gray-400">
                                스타일 유사도: <br><span class="text-[var(--color-art2)] font-semibold">92%</span>
                            </div>
                        </div>
                        <button class="mt-4 px-4 py-2 text-sm text-gray-300 border border-gray-600 rounded-lg hover:border-white transition duration-200">
                            상세 분석 리포트 보기
                        </button>
                    </div>

                    <!-- 4. 구매하기 및 코인 금액 (가장 하단으로 푸시) --><div class="flex justify-between items-center pt-4 mt-auto">
                        <!-- cta-button 클래스 적용 --><button class="flex-1 mr-4 py-3 text-white text-lg font-bold rounded-lg transition duration-200 shadow-xl cta-button">
                            구매하기
                        </button>
                        <div class="text-2xl font-extrabold text-white">
                            1500 코인
                        </div>
                    </div>
                </div>
            </div>

            <!-- 노드 연결선 역할을 시각적으로 대체하는 구분선 --><div class="w-px bg-gray-700/50 hidden lg:block"></div>

            <!-- 오른쪽 박스: 프롬프트, 작가의 한마디, 구매자 섹션 (내용 유지) --><div class="w-1/2 flex flex-col space-y-6">

                <!-- 프롬프트 박스 (블러 복원) -->
                <!-- flex-grow 적용: 오른쪽 열이 왼쪽 열과 높이를 맞추도록 확장 -->
                <div class="bg-black/70 p-5 rounded-xl flex flex-col space-y-4 border border-gray-800 shadow-inner flex-grow">
                    <p class="text-lg font-bold text-gray-300 flex items-center">
                        <i class="fa-solid fa-lightbulb text-[var(--color-accent-orange)] mr-2"></i> 프롬프트
                    </p>
                    <!-- h-60 제거 및 flex-grow 적용: 박스 높이가 늘어나도록 허용 -->
                    <div class="relative bg-gray-900 p-4 rounded-lg overflow-y-auto custom-scrollbar flex-grow">
                        <!-- 블러 처리된 프롬프트 텍스트 --><div class="blur-text text-gray-400 leading-relaxed space-y-2">
                            <p>A cute, friendly robot astronaut character design, volumetric lighting, digital art, high detail, vibrant colors, cartoon style, smooth texture, inspired by Pixar and Disney, cinematic shot, 8k resolution, trending on Artstation. The helmet is reflecting a small star field. --ar 1:1 --v 6.0</p>
                            <p>### **(이 내용은 구매 후 블러가 해제됩니다)** ###</p>
                            <p>Additional hidden parameters: &lt;model: sd&gt; &lt;style: cute&gt; &lt;camera: close-up&gt;</p>
                        </div>
                        <!-- 블러 효과 위에 버튼 배치 및 메시지 오버레이 --><div class="absolute inset-0 flex flex-col justify-center items-center bg-black/60 backdrop-blur-sm rounded-lg">
                            <p class="text-white text-xl font-bold mb-4">구매 후 프롬프트가 공개됩니다.</p>
                            <div class="flex space-x-4">
                                <!-- 복사하기 버튼 --><button class="prompt-btn">
                                    <i class="fa-regular fa-copy"></i> 복사하기
                                </button>
                                <!-- 공유하기 버튼 --><button class="prompt-btn">
                                    <i class="fa-solid fa-share-alt"></i> 공유하기
                                </button>
                                <!-- 다운받기 버튼 --><button class="prompt-btn">
                                    <i class="fa-solid fa-download"></i> 다운받기
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 작가의 한마디 박스 --><div class="bg-black/70 p-5 rounded-xl flex flex-col space-y-3 border border-gray-800">
                    <p class="text-lg font-bold text-gray-300 flex items-center">
                        <i class="fa-solid fa-user-edit text-[var(--color-accent-orange)] mr-2"></i> 작가의 한마디
                    </p>
                    <p class="text-sm text-gray-400 leading-relaxed border-b border-gray-700 pb-3">
                        이 작품은 모든 배경 요소와 캐릭터를 직접 제작한 후, AI 툴의 스타일 변환 기능을 사용하여 독특한 픽셀아트 스타일을 입혀 완성했습니다. AI의 도움을 받아 창의적인 아이디어를 시각화하는 과정이 정말 즐거웠습니다.
                    </p>
                    <!-- 관련 키워드 해시태그 --><div class="flex flex-wrap gap-2 pt-1">
                        <span class="text-xs text-[var(--color-accent-orange)] bg-gray-800/50 px-3 py-1 rounded-full hover:bg-gray-700 transition">#픽셀아트</span>
                        <span class="text-xs text-[var(--color-accent-orange)] bg-gray-800/50 px-3 py-1 rounded-full hover:bg-gray-700 transition">#자체제작</span>
                        <span class="text-xs text-[var(--color-accent-orange)] bg-gray-800/50 px-3 py-1 rounded-full hover:bg-gray-700 transition">#AI콜라보</span>
                        <span class="text-xs text-[var(--color-accent-orange)] bg-gray-800/50 px-3 py-1 rounded-full hover:bg-gray-700 transition">#우주비행사</span>
                        <span class="text-xs text-[var(--color-accent-orange)] bg-gray-800/50 px-3 py-1 rounded-full hover:bg-gray-700 transition">#캐릭터디자인</span>
                        <span class="text-xs text-[var(--color-accent-orange)] bg-gray-800/50 px-3 py-1 rounded-full hover:bg-gray-700 transition">#Cute</span>
                    </div>
                </div>

                <!-- 이 작품을 구매한 사람들 섹션 (요청에 따라 레이아웃 변경: 제목 아래 프로필 배치) -->
                <div class="bg-black/70 p-5 rounded-xl flex flex-col space-y-3 border border-gray-800">
                    <!-- 제목: 한 줄 정렬은 이미 text-base, whitespace-nowrap으로 처리됨 -->
                    <p class="text-base font-bold text-gray-300 whitespace-nowrap">이 작품을 구매한 사람들</p>
                    
                    <!-- 구매자 프로필 (다음 줄로 이동 및 우측 정렬) -->
                    <div class="flex justify-end items-center -space-x-2 pt-1">
                        <!-- 구매자 프로필 (총 5명 + 공유 횟수) --><div class="w-8 h-8 bg-purple-500 rounded-full border-2 border-black/70 shadow-md z-50"></div>
                        <div class="w-8 h-8 bg-teal-500 rounded-full border-2 border-black/70 shadow-md z-40"></div>
                        <div class="w-8 h-8 bg-pink-500 rounded-full border-2 border-black/70 shadow-md z-30"></div>
                        <div class="w-8 h-8 bg-yellow-500 rounded-full border-2 border-black/70 shadow-md z-20"></div>
                        <div class="w-8 h-8 bg-blue-500 rounded-full border-2 border-black/70 shadow-md z-10"></div>
                        
                        <!-- 총 공유한 숫자 (99+) --><div class="w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white border-2 border-black/70 shadow-md z-0 ml-4" style="background-color: var(--color-accent-orange);">
                            99+
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <script>
        // 이 부분은 기능 구현에 필요한 JavaScript를 추가할 수 있습니다.
        
        // 클립보드 복사 함수
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            console.log('클립보드에 복사되었습니다.');
        }

        // 버튼 클릭 이벤트 처리
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', () => {
                const action = button.textContent.trim().replace(/\s/g, ''); // 공백 제거
                
                // 프롬프트 박스 안의 버튼인지 확인 (오버레이 내부에 있는지 확인)
                if (button.closest('.absolute.inset-0')) {
                    // 블러 처리된 상태이므로 복사할 텍스트를 하드코딩된 원본으로 사용
                    const promptText = "A cute, friendly robot astronaut character design, volumetric lighting, digital art, high detail, vibrant colors, cartoon style, smooth texture, inspired by Pixar and Disney, cinematic shot, 8k resolution, trending on Artstation. The helmet is reflecting a small star field. --ar 1:1 --v 6.0\nAdditional hidden parameters: <model: sd> <style: cute> <camera: close-up>";
                    
                    if (action === '복사하기') {
                        copyToClipboard(promptText);
                        console.log('프롬프트가 복사되었습니다.');
                    } else if (action === '공유하기') {
                        // 실제 공유 기능 (더미)
                        console.log('공유하기 기능이 실행되었습니다.');
                    } else if (action === '다운받기') {
                        // 실제 다운로드 기능 (더미)
                        console.log('작품 다운로드가 요청되었습니다.');
                    }
                } else if (action === '구매하기') {
                    // 구매 기능 (더미)
                    console.log('작품 구매가 요청되었습니다. 코인 차감 로직 실행.');
                }
            });
        });
    </script>
</body>
</html>